<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>event loop ще одне пояснення</title>
</head>
<body>

<script>

<!--Асинхроний код-->
// функція setTimeout приймає callback function
// яку потрібно виконати з затримкою в 1 секунду

// якщо є дві таких функції
// першою виконається з меншою затримкою


// якщо однакова затримка, то виконуються в послідовності
// setTimeout(() =>{
//     console.log('я перша')
// },1000)
//
// setTimeout(() =>{
//     console.log('я перша')
// },1000)
// setTimeout(() =>{
//     console.log('я друга')
// },2000)
//
// setTimeout(() =>{
//     console.log('я перша')
// },1000)


// Далі приклади
// console.log('log1')
//
// setTimeout(() =>{ console.log('2 секунди')},2000)
//
// console.log('log2')
//
// setTimeout(() =>{console.log('1 секунда')},1000)
//
// console.log('log3')


// Приклад на циклі

// let i = 0
//
// while (i<5){
//     setTimeout(() =>{
//         console.log(i)
//     },2000)
//     i++
// }
//відбулось 5 ітерації - виведено 5 разів по 5
// на кожній ітерації цикл збільшувався на 1 і вийшло 5
// коли setTimeout чекав свої черги цикл збільшився і став 5
// потім почав спрацьовувати setTimeout теж 5 раз як по циклу
// і брав поточний результат циклу - це 5
// тому виведено 5 разів по 5


// що з цим робити
// setTimeout кладемо у функцію
// для того, щоб не відбувалось так
// а виконувалось як нормальна синхронна функція но з затримання
// передаємо у функцію
// функція має здатність запам'ятовувати змінні (замикання)
// в цикл while виконується синхронна функція,
// так як асинхронна схована в функції під капотом
// перша дія циклу буде 0 і відправлена на очікування
// і потім по циклу на збільшення і на очікування у webapi
// через встановленний час буде виведення всього циклу зі збільшенням на 1
//
//
let i = 0

while (i<5){
    run(i);
    i++
}

function run (i) {
    setTimeout(() =>{
        console.log(i)
    },2000)
}

</script>

</body>
</html>